<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>FacePro Ultimate - 终极面部分析与形象顾问系统</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        :root {
            --primary-color: #7c3aed;
            --secondary-color: #8b5cf6;
            --accent-color: #f59e0b;
            --success-color: #10b981;
            --danger-color: #ef4444;
            --info-color: #3b82f6;
            --light-bg: #f8fafc;
            --dark-text: #1e293b;
            --light-text: #64748b;
            --card-shadow: 0 15px 35px rgba(0, 0, 0, 0.08);
            --transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            --gradient-primary: linear-gradient(135deg, #7c3aed 0%, #8b5cf6 100%);
            --gradient-secondary: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
            --gradient-success: linear-gradient(135deg, #10b981 0%, #34d399 100%);
            --gradient-male: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            --gradient-female: linear-gradient(135deg, #ec4899 0%, #be185d 100%);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f0f4ff 0%, #e6f0ff 100%);
            color: var(--dark-text);
            line-height: 1.8;
            min-height: 100vh;
            padding: 15px;
        }
        
        .container {
            max-width: 1100px;
            margin: 0 auto;
            background-color: white;
            border-radius: 24px;
            box-shadow: 0 20px 60px rgba(124, 58, 237, 0.15);
            overflow: hidden;
            position: relative;
        }
        
        /* 性别主题背景 */
        .gender-background {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.03;
            z-index: 0;
            background-size: 300px 300px;
        }
        
        .male-bg {
            background-image: url("data:image/svg+xml,%3Csvg width='200' height='200' viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%233b82f6' fill-opacity='0.1'%3E%3Cpath d='M100 0L200 100L100 200L0 100L100 0Z'/%3E%3C/g%3E%3C/svg%3E");
        }
        
        .female-bg {
            background-image: url("data:image/svg+xml,%3Csvg width='200' height='200' viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ec4899' fill-opacity='0.1'%3E%3Cpath d='M100 0C155.2 0 200 44.8 200 100C200 155.2 155.2 200 100 200C44.8 200 0 155.2 0 100C0 44.8 44.8 0 100 0Z'/%3E%3C/g%3E%3C/svg%3E");
        }
        
        /* 装饰元素 */
        .decoration {
            position: absolute;
            z-index: 1;
            opacity: 0.1;
        }
        
        .decoration-1 {
            width: 300px;
            height: 300px;
            border-radius: 50%;
            background: radial-gradient(circle, var(--primary-color) 0%, transparent 70%);
            top: -150px;
            right: -150px;
        }
        
        .decoration-2 {
            width: 200px;
            height: 200px;
            border-radius: 40% 60% 60% 40% / 40% 40% 60% 60%;
            background: linear-gradient(135deg, var(--secondary-color), var(--accent-color));
            bottom: 80px;
            left: -100px;
        }
        
        .content-wrapper {
            position: relative;
            z-index: 2;
        }
        
        /* 头部区域 */
        header {
            background: var(--gradient-primary);
            color: white;
            padding: 30px 25px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .header-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.1;
            background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='%23ffffff' fill-opacity='0.4'%3E%3Cpath d='M50 0L100 50L50 100L0 50L50 0Z'/%3E%3C/g%3E%3C/svg%3E");
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin-bottom: 15px;
            flex-wrap: wrap;
        }
        
        .logo-icon {
            width: 60px;
            height: 60px;
            background: rgba(255, 255, 255, 0.25);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            backdrop-filter: blur(10px);
            border: 3px solid rgba(255, 255, 255, 0.4);
        }
        
        .logo-text {
            font-size: 28px;
            font-weight: 900;
            letter-spacing: 1.2px;
            text-shadow: 0 3px 15px rgba(0, 0, 0, 0.2);
        }
        
        .logo-text span {
            color: #fbbf24;
        }
        
        .subtitle {
            font-size: 16px;
            opacity: 0.95;
            margin: 0 auto;
            line-height: 1.6;
            font-weight: 300;
            padding: 0 10px;
        }
        
        /* 性别选择区域 */
        .gender-selection {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0 20px;
            flex-wrap: wrap;
        }
        
        .gender-option {
            width: 140px;
            height: 140px;
            border-radius: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .gender-option.male {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
        }
        
        .gender-option.female {
            background: linear-gradient(135deg, #ec4899 0%, #be185d 100%);
            color: white;
        }
        
        .gender-option:hover {
            transform: translateY(-5px) scale(1.03);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }
        
        .gender-option.selected {
            transform: translateY(-3px) scale(1.03);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
            border: 3px solid white;
        }
        
        .gender-icon {
            font-size: 50px;
            margin-bottom: 10px;
        }
        
        .gender-text {
            font-size: 20px;
            font-weight: 800;
        }
        
        /* 步骤指示器 */
        .steps-container {
            display: flex;
            justify-content: center;
            margin: 25px 0 30px;
            position: relative;
            flex-wrap: wrap;
        }
        
        .steps-line {
            position: absolute;
            top: 30px;
            left: 50px;
            right: 50px;
            height: 4px;
            background: rgba(255, 255, 255, 0.3);
            z-index: 0;
            border-radius: 2px;
        }
        
        .step {
            position: relative;
            z-index: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100px;
            margin: 0 10px;
        }
        
        .step-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 800;
            font-size: 22px;
            margin-bottom: 10px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            transition: var(--transition);
            backdrop-filter: blur(5px);
        }
        
        .step.active .step-icon {
            background: white;
            color: var(--primary-color);
            transform: scale(1.1);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);
        }
        
        .step-text {
            font-size: 14px;
            font-weight: 700;
            color: rgba(255, 255, 255, 0.9);
            text-align: center;
        }
        
        .step.active .step-text {
            color: white;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
        }
        
        .main-content {
            padding: 25px;
        }
        
        /* 卡片样式 */
        .card {
            background: white;
            border-radius: 20px;
            padding: 25px;
            box-shadow: var(--card-shadow);
            margin-bottom: 25px;
            border: 1px solid #f1f5f9;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }
        
        .card:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 6px;
            height: 100%;
            background: var(--gradient-primary);
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        
        .card-title {
            font-size: 22px;
            margin-bottom: 20px;
            color: var(--dark-text);
            display: flex;
            align-items: center;
            gap: 15px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f1f5f9;
        }
        
        .card-title i {
            width: 50px;
            height: 50px;
            background: var(--gradient-primary);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 22px;
        }
        
        /* 表单样式 */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-label {
            display: block;
            margin-bottom: 10px;
            font-weight: 700;
            color: var(--dark-text);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 16px;
        }
        
        .form-label i {
            color: var(--primary-color);
            font-size: 20px;
        }
        
        .form-input {
            width: 100%;
            padding: 15px 18px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 16px;
            transition: var(--transition);
            background-color: white;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 4px rgba(124, 58, 237, 0.1);
        }
        
        /* 上传区域 */
        .upload-area {
            border: 3px dashed #cbd5e1;
            border-radius: 20px;
            padding: 40px 20px;
            text-align: center;
            margin: 25px 0;
            background-color: white;
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .upload-area:hover {
            border-color: var(--primary-color);
            background-color: #f8faff;
            transform: translateY(-5px);
        }
        
        .upload-area.drag-over {
            border-color: var(--primary-color);
            background-color: #f0f7ff;
        }
        
        .upload-icon {
            font-size: 70px;
            margin-bottom: 20px;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .upload-text {
            font-size: 22px;
            font-weight: 800;
            margin-bottom: 10px;
            color: var(--primary-color);
        }
        
        .upload-hint {
            color: var(--light-text);
            font-size: 14px;
            line-height: 1.5;
        }
        
        #imageInput {
            display: none;
        }
        
        /* 预览区域 */
        .preview-container {
            display: none;
            margin: 25px 0;
            text-align: center;
            animation: fadeIn 0.6s ease;
        }
        
        .preview-img {
            max-width: 100%;
            max-height: 400px;
            border-radius: 18px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            margin-bottom: 20px;
            border: 6px solid white;
            object-fit: contain;
            background-color: #f8fafc;
        }
        
        /* 按钮样式 */
        .btn {
            padding: 16px 30px;
            border-radius: 40px;
            font-size: 16px;
            font-weight: 800;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin: 8px;
            border: none;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.12);
        }
        
        .btn-primary {
            background: var(--gradient-primary);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(124, 58, 237, 0.3);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #64748b, #94a3b8);
            color: white;
        }
        
        .btn-secondary:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(100, 116, 139, 0.3);
        }
        
        .btn-accent {
            background: var(--gradient-secondary);
            color: white;
        }
        
        .btn-success {
            background: var(--gradient-success);
            color: white;
        }
        
        .btn-success:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(16, 185, 129, 0.3);
        }
        
        /* 加载动画 */
        .loading {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }
        
        .loading-spinner {
            width: 70px;
            height: 70px;
            border: 6px solid #e2e8f0;
            border-top: 6px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1.2s linear infinite;
            margin: 0 auto 25px;
        }
        
        .loading-gender-icon {
            font-size: 40px;
            margin-bottom: 20px;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* 分析结果区域 */
        .analysis-section {
            display: none;
        }
        
        /* 分析头部 */
        .analysis-header {
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            border-radius: 20px;
            padding: 25px;
            margin: 25px 0;
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            justify-content: space-between;
            gap: 20px;
        }
        
        .persona-card {
            display: flex;
            align-items: center;
            gap: 20px;
            flex: 1;
            min-width: 300px;
        }
        
        .persona-avatar {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            overflow: hidden;
            border: 6px solid white;
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.15);
        }
        
        .persona-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .persona-info h3 {
            font-size: 24px;
            color: var(--dark-text);
            margin-bottom: 8px;
        }
        
        .persona-info p {
            color: var(--light-text);
            font-size: 14px;
            margin-bottom: 12px;
        }
        
        .beauty-type {
            display: inline-block;
            padding: 10px 20px;
            background: var(--gradient-primary);
            color: white;
            border-radius: 40px;
            font-size: 16px;
            font-weight: 800;
        }
        
        .gender-specific-type {
            display: inline-block;
            padding: 6px 15px;
            border-radius: 40px;
            font-size: 14px;
            font-weight: 700;
            margin-left: 10px;
        }
        
        .male-type {
            background: var(--gradient-male);
            color: white;
        }
        
        .female-type {
            background: var(--gradient-female);
            color: white;
        }
        
        /* 分数卡片 */
        .score-card {
            background: white;
            border-radius: 18px;
            padding: 20px;
            text-align: center;
            min-width: 180px;
            box-shadow: var(--card-shadow);
        }
        
        .score-value {
            font-size: 46px;
            font-weight: 900;
            background: var(--gradient-primary);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1;
            margin-bottom: 8px;
        }
        
        .score-label {
            color: var(--light-text);
            font-size: 16px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 1.2px;
        }
        
        /* 标签页 */
        .analysis-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 25px 0;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: 10px;
        }
        
        .tab-btn {
            padding: 14px 24px;
            background: #f1f5f9;
            border: none;
            border-radius: 12px;
            font-weight: 800;
            color: var(--light-text);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 15px;
        }
        
        .tab-btn:hover {
            background: #e2e8f0;
            color: var(--dark-text);
        }
        
        .tab-btn.active {
            background: var(--gradient-primary);
            color: white;
        }
        
        .tab-content {
            display: none;
            animation: fadeIn 0.6s ease;
        }
        
        .tab-content.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* 分析网格 */
        .analysis-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin: 25px 0;
        }
        
        .analysis-card {
            background: white;
            border-radius: 18px;
            padding: 25px;
            box-shadow: var(--card-shadow);
            border-top: 6px solid var(--primary-color);
            transition: var(--transition);
        }
        
        .analysis-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
        }
        
        .analysis-card-title {
            font-size: 20px;
            font-weight: 900;
            margin-bottom: 15px;
            color: var(--dark-text);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .analysis-card-title i {
            width: 45px;
            height: 45px;
            background: var(--gradient-primary);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 22px;
        }
        
        /* 进度条 */
        .progress-container {
            margin: 15px 0;
        }
        
        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-weight: 700;
            font-size: 15px;
        }
        
        .progress-bar {
            height: 10px;
            background-color: #e2e8f0;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: var(--gradient-primary);
            border-radius: 5px;
            transition: width 1.2s ease;
        }
        
        /* 七天计划 */
        .week-plan {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin: 25px 0;
        }
        
        .day-card {
            background: white;
            border-radius: 18px;
            padding: 25px;
            box-shadow: var(--card-shadow);
            border-left: 8px solid var(--accent-color);
            transition: var(--transition);
        }
        
        .day-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
        }
        
        .day-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
            padding-bottom: 12px;
            border-bottom: 2px solid #f1f5f9;
        }
        
        .day-title {
            font-size: 20px;
            font-weight: 900;
            color: var(--dark-text);
        }
        
        .day-number {
            width: 40px;
            height: 40px;
            background: var(--gradient-secondary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 900;
            font-size: 20px;
        }
        
        .day-content {
            color: var(--light-text);
            line-height: 1.6;
        }
        
        .day-content ul {
            list-style-type: none;
            padding-left: 0;
        }
        
        .day-content li {
            padding: 8px 0;
            border-bottom: 2px dashed #f1f5f9;
            display: flex;
            align-items: flex-start;
            gap: 10px;
        }
        
        .day-content li:last-child {
            border-bottom: none;
        }
        
        .day-content li i {
            color: var(--success-color);
            margin-top: 4px;
            font-size: 18px;
        }
        
        /* 核心优化重点 */
        .optimization-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin: 25px 0;
        }
        
        .optimization-card {
            background: white;
            border-radius: 18px;
            padding: 25px;
            box-shadow: var(--card-shadow);
            border-top: 6px solid var(--primary-color);
            transition: var(--transition);
        }
        
        .optimization-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.12);
        }
        
        .optimization-card-title {
            font-size: 20px;
            font-weight: 900;
            margin-bottom: 20px;
            color: var(--dark-text);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .optimization-card-title i {
            width: 45px;
            height: 45px;
            background: var(--gradient-primary);
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 22px;
        }
        
        .optimization-content {
            color: var(--light-text);
            line-height: 1.6;
        }
        
        .optimization-list {
            list-style-type: none;
            padding-left: 0;
        }
        
        .optimization-list li {
            padding: 12px 0;
            border-bottom: 2px solid #f1f5f9;
            display: flex;
            align-items: flex-start;
            gap: 12px;
        }
        
        .optimization-list li:last-child {
            border-bottom: none;
        }
        
        .optimization-list li i {
            color: var(--success-color);
            margin-top: 4px;
            font-size: 18px;
        }
        
        /* 导出区域 */
        .export-container {
            text-align: center;
            margin: 35px 0 40px;
            padding: 30px 20px;
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            border-radius: 20px;
        }
        
        .btn-export {
            background: var(--gradient-success);
            color: white;
            padding: 18px 35px;
            border-radius: 40px;
            font-size: 18px;
            font-weight: 900;
            cursor: pointer;
            transition: var(--transition);
            display: inline-flex;
            align-items: center;
            gap: 15px;
            border: none;
            box-shadow: 0 12px 30px rgba(16, 185, 129, 0.3);
        }
        
        .btn-export:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(16, 185, 129, 0.4);
        }
        
        .btn-export:disabled {
            background: linear-gradient(135deg, #9ca3af, #d1d5db);
            cursor: not-allowed;
            transform: none;
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);
        }
        
        .export-loading {
            display: none;
            margin-top: 20px;
            color: var(--primary-color);
            font-size: 16px;
        }
        
        .export-loading i {
            margin-right: 10px;
            animation: spin 1s linear infinite;
        }
        
        /* 响应式设计 */
        @media (min-width: 768px) {
            body {
                padding: 25px;
            }
            
            .container {
                border-radius: 28px;
            }
            
            .main-content {
                padding: 35px;
            }
            
            .analysis-grid {
                grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            }
            
            .week-plan {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
            
            .optimization-grid {
                grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            }
            
            .form-grid {
                grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            }
            
            .logo-icon {
                width: 70px;
                height: 70px;
                font-size: 32px;
            }
            
            .logo-text {
                font-size: 36px;
            }
            
            .subtitle {
                font-size: 18px;
            }
        }
        
        @media (min-width: 992px) {
            .container {
                border-radius: 32px;
            }
            
            header {
                padding: 40px 35px;
            }
            
            .logo-icon {
                width: 80px;
                height: 80px;
                font-size: 36px;
            }
            
            .logo-text {
                font-size: 42px;
            }
            
            .subtitle {
                font-size: 20px;
            }
            
            .gender-option {
                width: 160px;
                height: 160px;
            }
            
            .gender-icon {
                font-size: 60px;
            }
            
            .main-content {
                padding: 40px;
            }
            
            .card {
                padding: 35px;
            }
            
            .card-title {
                font-size: 28px;
            }
            
            .card-title i {
                width: 60px;
                height: 60px;
                font-size: 26px;
            }
        }
        
        /* 底部 */
        footer {
            text-align: center;
            margin-top: 35px;
            color: var(--light-text);
            font-size: 14px;
            padding: 25px 0;
            border-top: 2px solid #e2e8f0;
        }
    </style>
</head>
<body>
    <div class="container" id="mainContainer">
        <div class="decoration decoration-1"></div>
        <div class="decoration decoration-2"></div>
        
        <div class="content-wrapper">
            <header>
                <div class="header-overlay"></div>
                <div class="logo-container">
                    <div class="logo-icon">
                        <i class="fas fa-crown"></i>
                    </div>
                    <div class="logo-text">Face<span>Pro</span> Ultimate</div>
                </div>
                <p class="subtitle">终极面部分析与个性化形象顾问系统，严格区分男女性别差异，提供完全不同的个性化建议</p>
                
                <!-- 性别选择 -->
                <div class="gender-selection">
                    <div class="gender-option male" id="maleOption">
                        <div class="gender-icon">
                            <i class="fas fa-mars"></i>
                        </div>
                        <div class="gender-text">男性分析</div>
                    </div>
                    <div class="gender-option female" id="femaleOption">
                        <div class="gender-icon">
                            <i class="fas fa-venus"></i>
                        </div>
                        <div class="gender-text">女性分析</div>
                    </div>
                </div>
                
                <!-- 步骤指示器 -->
                <div class="steps-container">
                    <div class="steps-line"></div>
                    <div class="step active" id="step1">
                        <div class="step-icon">1</div>
                        <div class="step-text">基本信息</div>
                    </div>
                    <div class="step" id="step2">
                        <div class="step-icon">2</div>
                        <div class="step-text">上传照片</div>
                    </div>
                    <div class="step" id="step3">
                        <div class="step-icon">3</div>
                        <div class="step-text">分析报告</div>
                    </div>
                    <div class="step" id="step4">
                        <div class="step-icon">4</div>
                        <div class="step-text">提升计划</div>
                    </div>
                </div>
            </header>
            
            <div class="main-content">
                <!-- 步骤1: 基本信息 -->
                <div class="card" id="step1Content">
                    <div class="card-title">
                        <i class="fas fa-user-edit"></i>
                        <span>基本信息</span>
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-venus-mars"></i>
                                性别
                            </label>
                            <div id="genderDisplay" class="form-input" style="font-weight: 700; color: var(--primary-color);">
                                请在上方选择性别
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-birthday-cake"></i>
                                年龄
                            </label>
                            <input type="number" class="form-input" id="age" placeholder="请输入年龄" min="1" max="120" value="28">
                        </div>
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-ruler-vertical"></i>
                                身高 (cm)
                            </label>
                            <input type="number" class="form-input" id="height" placeholder="请输入身高" min="50" max="250" value="175">
                        </div>
                        <div class="form-group">
                            <label class="form-label">
                                <i class="fas fa-weight"></i>
                                体重 (kg)
                            </label>
                            <input type="number" class="form-input" id="weight" placeholder="请输入体重" min="10" max="200" value="68">
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 25px;">
                        <button class="btn btn-primary" id="nextStep1">
                            <i class="fas fa-arrow-right"></i>
                            下一步：上传照片
                        </button>
                    </div>
                </div>
                
                <!-- 步骤2: 上传照片 -->
                <div class="card" id="step2Content" style="display: none;">
                    <div class="card-title">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <span>上传人脸照片</span>
                    </div>
                    
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-icon">
                            <i class="fas fa-user-circle"></i>
                        </div>
                        <div class="upload-text">点击或拖拽上传人脸照片</div>
                        <div class="upload-hint">请确保照片清晰、正面、无遮挡，光线均匀，以便获得准确分析结果</div>
                        <div class="file-info" id="fileInfo" style="display: none; margin-top: 20px; padding: 12px; background: #f1f5f9; border-radius: 10px; font-size: 14px;"></div>
                        <input type="file" id="imageInput" accept="image/*">
                    </div>
                    
                    <div class="preview-container" id="previewContainer">
                        <img class="preview-img" id="previewImage" src="" alt="预览">
                        <div>
                            <button class="btn btn-primary" id="analyzeBtn">
                                <i class="fas fa-robot"></i>
                                开始智能分析
                            </button>
                            <button class="btn btn-secondary" id="resetBtn">
                                <i class="fas fa-redo"></i>
                                重新选择照片
                            </button>
                        </div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 25px;">
                        <button class="btn btn-secondary" id="prevStep2">
                            <i class="fas fa-arrow-left"></i>
                            上一步：基本信息
                        </button>
                    </div>
                </div>
                
                <!-- 加载动画 -->
                <div class="loading" id="loading">
                    <div class="loading-spinner"></div>
                    <div class="loading-gender-icon" id="loadingGenderIcon">
                        <i class="fas fa-mars"></i>
                    </div>
                    <p style="font-size: 22px; font-weight: 800; margin-bottom: 12px;">正在使用AI技术分析您的面部特征</p>
                    <p style="color: var(--light-text); font-size: 16px;">分析内容：精准脸型识别、五官比例分析、骨骼结构评估、皮相质量检测</p>
                    <p style="color: var(--light-text); font-size: 14px; margin-top: 15px;">正在生成<span id="loadingGenderText">男性</span>专属分析报告，请耐心等待...</p>
                </div>
                
                <!-- 分析结果区域 -->
                <div class="analysis-section" id="analysisSection">
                    <!-- 导出按钮区域 -->
                    <div class="export-container">
                        <button class="btn-export" id="exportBtn">
                            <i class="fas fa-file-pdf"></i>
                            导出完整分析报告为PDF
                        </button>
                        <div class="export-loading" id="exportLoading">
                            <i class="fas fa-spinner"></i> 正在生成PDF报告，请稍候...
                        </div>
                    </div>
                    
                    <!-- 分析头部 -->
                    <div class="analysis-header">
                        <div class="persona-card">
                            <div class="persona-avatar">
                                <img id="resultImage" src="" alt="用户照片">
                            </div>
                            <div class="persona-info">
                                <h3 id="resultName">面部美学分析报告</h3>
                                <p><span id="resultGender">男性</span> · <span id="resultAge">28</span>岁 · <span id="resultHeight">175</span>cm · <span id="resultWeight">68</span>kg</p>
                                <div class="beauty-type" id="beautyType">硬朗系</div>
                                <div class="gender-specific-type male-type" id="genderSpecificType">男性专属分析</div>
                            </div>
                        </div>
                        
                        <div class="score-card">
                            <div class="score-value" id="overallScore">87</div>
                            <div class="score-label">综合美学评分</div>
                        </div>
                    </div>
                    
                    <!-- 标签页 -->
                    <div class="analysis-tabs">
                        <button class="tab-btn active" data-tab="tab1">
                            <i class="fas fa-eye"></i> 五官分析
                        </button>
                        <button class="tab-btn" data-tab="tab2">
                            <i class="fas fa-bone"></i> 骨骼分析
                        </button>
                        <button class="tab-btn" data-tab="tab3">
                            <i class="fas fa-smile"></i> 皮相分析
                        </button>
                        <button class="tab-btn" data-tab="tab4">
                            <i class="fas fa-bullseye"></i> 核心优化重点
                        </button>
                        <button class="tab-btn" data-tab="tab5">
                            <i class="fas fa-calendar-check"></i> 七天提升计划
                        </button>
                    </div>
                    
                    <!-- 五官分析 -->
                    <div class="tab-content active" id="tab1">
                        <div class="analysis-grid">
                            <div class="analysis-card">
                                <div class="analysis-card-title">
                                    <i class="fas fa-eye"></i>
                                    眼部分析
                                </div>
                                <div class="progress-container">
                                    <div class="progress-label">
                                        <span>眼型协调度</span>
                                        <span id="eyeScore">84%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="eyeFill" style="width: 84%"></div>
                                    </div>
                                </div>
                                <p id="eyeAnalysis" style="color: var(--light-text); line-height: 1.6; font-size: 15px;">您的眼型属于标准的杏仁眼，内外眼角比例协调，眼裂长度适中，双眼间距与面部宽度呈现黄金比例，符合美学标准。</p>
                            </div>
                            
                            <div class="analysis-card">
                                <div class="analysis-card-title">
                                    <i class="fas fa-kiss-wink-heart"></i>
                                    鼻部分析
                                </div>
                                <div class="progress-container">
                                    <div class="progress-label">
                                        <span>鼻部立体度</span>
                                        <span id="noseScore">78%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="noseFill" style="width: 78%"></div>
                                    </div>
                                </div>
                                <p id="noseAnalysis" style="color: var(--light-text); line-height: 1.6; font-size: 15px;">鼻梁高度适中，鼻翼宽度与面部比例协调。鼻尖表现点清晰，鼻小柱长度适中，侧面线条流畅，符合现代审美标准。</p>
                            </div>
                            
                            <div class="analysis-card">
                                <div class="analysis-card-title">
                                    <i class="fas fa-kiss"></i>
                                    唇部分析
                                </div>
                                <div class="progress-container">
                                    <div class="progress-label">
                                        <span>唇形饱满度</span>
                                        <span id="lipScore">92%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="lipFill" style="width: 92%"></div>
                                    </div>
                                </div>
                                <p id="lipAnalysis" style="color: var(--light-text); line-height: 1.6; font-size: 15px;">唇部轮廓清晰，唇峰明显，上下唇厚度比例接近1:1.5的黄金比例。嘴角自然微翘，呈现柔和美感，符合美学标准。</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 骨骼分析 -->
                    <div class="tab-content" id="tab2">
                        <div class="analysis-grid">
                            <div class="analysis-card">
                                <div class="analysis-card-title">
                                    <i class="fas fa-chess-board"></i>
                                    面部轮廓
                                </div>
                                <div class="progress-container">
                                    <div class="progress-label">
                                        <span>轮廓清晰度</span>
                                        <span id="contourScore">88%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="contourFill" style="width: 88%"></div>
                                    </div>
                                </div>
                                <p id="contourAnalysis" style="color: var(--light-text); line-height: 1.6; font-size: 15px;">面部骨骼结构清晰，颧骨位置适中，下颌角转折自然，整体轮廓线流畅，符合现代审美标准。</p>
                            </div>
                            
                            <div class="analysis-card">
                                <div class="analysis-card-title">
                                    <i class="fas fa-skull"></i>
                                    头骨比例
                                </div>
                                <div class="progress-container">
                                    <div class="progress-label">
                                        <span>头骨协调性</span>
                                        <span id="skullScore">76%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="skullFill" style="width: 76%"></div>
                                    </div>
                                </div>
                                <p id="skullAnalysis" style="color: var(--light-text); line-height: 1.6; font-size: 15px;">头骨宽度与长度比例接近黄金比例，颅顶高度适中，后脑勺饱满度良好，适合多种发型。</p>
                            </div>
                            
                            <div class="analysis-card">
                                <div class="analysis-card-title">
                                    <i class="fas fa-balance-scale"></i>
                                    对称性分析
                                </div>
                                <div class="progress-container">
                                    <div class="progress-label">
                                        <span>面部对称度</span>
                                        <span id="symmetryScore">81%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="symmetryFill" style="width: 81%"></div>
                                    </div>
                                </div>
                                <p id="symmetryAnalysis" style="color: var(--light-text); line-height: 1.6; font-size: 15px;">面部左右对称性良好，主要特征点偏差在正常范围内。轻微的不对称增加了面部的自然感。</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 皮相分析 -->
                    <div class="tab-content" id="tab3">
                        <div class="analysis-grid">
                            <div class="analysis-card">
                                <div class="analysis-card-title">
                                    <i class="fas fa-spa"></i>
                                    皮肤质量
                                </div>
                                <div class="progress-container">
                                    <div class="progress-label">
                                        <span>肤质健康度</span>
                                        <span id="skinScore">79%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="skinFill" style="width: 79%"></div>
                                    </div>
                                </div>
                                <p id="skinAnalysis" style="color: var(--light-text); line-height: 1.6; font-size: 15px;">皮肤质地细腻，光泽度良好。T区略有油脂分泌，但整体水油平衡控制得当。建议加强防晒护理。</p>
                            </div>
                            
                            <div class="analysis-card">
                                <div class="analysis-card-title">
                                    <i class="fas fa-blush"></i>
                                    软组织分布
                                </div>
                                <div class="progress-container">
                                    <div class="progress-label">
                                        <span>软组织饱满度</span>
                                        <span id="tissueScore">85%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="tissueFill" style="width: 85%"></div>
                                    </div>
                                </div>
                                <p id="tissueAnalysis" style="color: var(--light-text); line-height: 1.6; font-size: 15px;">面部软组织分布均匀，苹果肌饱满度适中，颧脂垫位置良好，面部线条流畅柔和。</p>
                            </div>
                            
                            <div class="analysis-card">
                                <div class="analysis-card-title">
                                    <i class="fas fa-allergies"></i>
                                    老化迹象
                                </div>
                                <div class="progress-container">
                                    <div class="progress-label">
                                        <span>年轻态指数</span>
                                        <span id="youthScore">91%</span>
                                    </div>
                                    <div class="progress-bar">
                                        <div class="progress-fill" id="youthFill" style="width: 91%"></div>
                                    </div>
                                </div>
                                <p id="youthAnalysis" style="color: var(--light-text); line-height: 1.6; font-size: 15px;">面部紧致度良好，无明显皱纹和松弛迹象。眼下区域略有细纹，建议加强保湿和眼部护理。</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 核心优化重点 -->
                    <div class="tab-content" id="tab4">
                        <div class="optimization-grid" id="optimizationGrid">
                            <!-- 核心优化内容将通过JS动态生成 -->
                        </div>
                    </div>
                    
                    <!-- 七天形象提升计划 -->
                    <div class="tab-content" id="tab5">
                        <div class="week-plan" id="weekPlan">
                            <!-- 七天计划内容将通过JS动态生成 -->
                        </div>
                    </div>
                    
                    <!-- 新的分析按钮 -->
                    <div style="text-align: center; margin-top: 35px;">
                        <button class="btn btn-accent" id="newAnalysisBtn">
                            <i class="fas fa-plus-circle"></i>
                            开始新的分析
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- 底部信息已更新为2026年 -->
            <footer>
                <p>FacePro Ultimate 终极面部分析与形象顾问系统 | 本分析结果基于人工智能算法，仅供参考</p>
                <p>© 2026 FacePro Ultimate 版权所有 | 数据安全保护 | 隐私条款</p>
            </footer>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 初始化变量
            let uploadedImageData = null;
            let userGender = 'male'; // 默认男性
            let userAge = 28;
            let userHeight = 175;
            let userWeight = 68;
            let selectedFaceShape = null;
            
            // 获取DOM元素
            const maleOption = document.getElementById('maleOption');
            const femaleOption = document.getElementById('femaleOption');
            const genderDisplay = document.getElementById('genderDisplay');
            const genderBackground = document.createElement('div');
            genderBackground.className = 'gender-background';
            document.querySelector('.container').appendChild(genderBackground);
            
            // 设置性别选择
            function setGender(gender) {
                userGender = gender;
                
                // 更新UI显示
                if (gender === 'male') {
                    maleOption.classList.add('selected');
                    femaleOption.classList.remove('selected');
                    genderDisplay.textContent = '男性';
                    genderDisplay.style.color = '#3b82f6';
                    genderBackground.className = 'gender-background male-bg';
                    
                    // 更新加载图标
                    document.getElementById('loadingGenderIcon').innerHTML = '<i class="fas fa-mars"></i>';
                    document.getElementById('loadingGenderText').textContent = '男性';
                    
                    // 更新分析结果中的性别标签
                    document.getElementById('genderSpecificType').className = 'gender-specific-type male-type';
                    document.getElementById('genderSpecificType').textContent = '男性专属分析';
                } else {
                    maleOption.classList.remove('selected');
                    femaleOption.classList.add('selected');
                    genderDisplay.textContent = '女性';
                    genderDisplay.style.color = '#ec4899';
                    genderBackground.className = 'gender-background female-bg';
                    
                    // 更新加载图标
                    document.getElementById('loadingGenderIcon').innerHTML = '<i class="fas fa-venus"></i>';
                    document.getElementById('loadingGenderText').textContent = '女性';
                    
                    // 更新分析结果中的性别标签
                    document.getElementById('genderSpecificType').className = 'gender-specific-type female-type';
                    document.getElementById('genderSpecificType').textContent = '女性专属分析';
                }
            }
            
            // 初始化性别
            setGender('male');
            
            // 性别选择事件
            maleOption.addEventListener('click', function() {
                setGender('male');
            });
            
            femaleOption.addEventListener('click', function() {
                setGender('female');
            });
            
            // 步骤控制
            const step1Content = document.getElementById('step1Content');
            const step2Content = document.getElementById('step2Content');
            const analysisSection = document.getElementById('analysisSection');
            const loading = document.getElementById('loading');
            
            const step1 = document.getElementById('step1');
            const step2 = document.getElementById('step2');
            const step3 = document.getElementById('step3');
            const step4 = document.getElementById('step4');
            
            // 个人信息输入
            const ageInput = document.getElementById('age');
            const heightInput = document.getElementById('height');
            const weightInput = document.getElementById('weight');
            
            // 下一步按钮
            document.getElementById('nextStep1').addEventListener('click', function() {
                // 验证输入
                userAge = parseInt(ageInput.value);
                userHeight = parseInt(heightInput.value);
                userWeight = parseInt(weightInput.value);
                
                if (!userAge || userAge < 1 || userAge > 120) {
                    alert('请输入有效的年龄（1-120岁）');
                    return;
                }
                
                if (!userHeight || userHeight < 50 || userHeight > 250) {
                    alert('请输入有效的身高（50-250cm）');
                    return;
                }
                
                if (!userWeight || userWeight < 10 || userWeight > 200) {
                    alert('请输入有效的体重（10-200kg）');
                    return;
                }
                
                // 切换到步骤2
                step1Content.style.display = 'none';
                step2Content.style.display = 'block';
                
                // 更新步骤指示器
                step1.classList.remove('active');
                step2.classList.add('active');
            });
            
            // 上一步按钮
            document.getElementById('prevStep2').addEventListener('click', function() {
                step2Content.style.display = 'none';
                step1Content.style.display = 'block';
                
                step2.classList.remove('active');
                step1.classList.add('active');
            });
            
            // 图片上传功能
            const imageInput = document.getElementById('imageInput');
            const uploadArea = document.getElementById('uploadArea');
            const previewContainer = document.getElementById('previewContainer');
            const previewImage = document.getElementById('previewImage');
            const resultImage = document.getElementById('resultImage');
            const fileInfo = document.getElementById('fileInfo');
            const analyzeBtn = document.getElementById('analyzeBtn');
            const resetBtn = document.getElementById('resetBtn');
            
            // 点击上传区域
            uploadArea.addEventListener('click', function() {
                imageInput.click();
            });
            
            // 文件选择事件
            imageInput.addEventListener('change', function(e) {
                handleImageUpload(e);
            });
            
            // 处理图片上传
            function handleImageUpload(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                // 检查文件类型
                if (!file.type.match('image.*')) {
                    alert('请选择图片文件（JPG、PNG等格式）');
                    return;
                }
                
                // 检查文件大小（10MB以内）
                if (file.size > 10 * 1024 * 1024) {
                    alert('图片大小不能超过10MB');
                    return;
                }
                
                // 显示文件信息
                fileInfo.style.display = 'block';
                fileInfo.textContent = `已选择: ${file.name} (${(file.size / 1024).toFixed(1)} KB)`;
                
                // 使用FileReader读取图片
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    // 保存图片数据
                    uploadedImageData = e.target.result;
                    
                    // 设置预览图片
                    previewImage.src = uploadedImageData;
                    resultImage.src = uploadedImageData;
                    
                    // 显示预览区域
                    previewContainer.style.display = 'block';
                    
                    console.log('图片上传成功，用户性别:', userGender);
                };
                
                reader.onerror = function() {
                    alert('图片读取失败，请重试');
                };
                
                reader.readAsDataURL(file);
            }
            
            // 拖拽上传功能
            uploadArea.addEventListener('dragover', function(e) {
                e.preventDefault();
                uploadArea.classList.add('drag-over');
            });
            
            uploadArea.addEventListener('dragleave', function() {
                uploadArea.classList.remove('drag-over');
            });
            
            uploadArea.addEventListener('drop', function(e) {
                e.preventDefault();
                uploadArea.classList.remove('drag-over');
                
                if (e.dataTransfer.files.length) {
                    imageInput.files = e.dataTransfer.files;
                    const event = new Event('change');
                    imageInput.dispatchEvent(event);
                }
            });
            
            // 重置按钮
            resetBtn.addEventListener('click', function() {
                imageInput.value = '';
                uploadedImageData = null;
                previewContainer.style.display = 'none';
                fileInfo.style.display = 'none';
            });
            
            // 开始分析按钮
            analyzeBtn.addEventListener('click', function() {
                if (!uploadedImageData) {
                    alert('请先上传人脸图片');
                    return;
                }
                
                // 显示加载动画
                step2Content.style.display = 'none';
                loading.style.display = 'block';
                
                // 更新步骤指示器
                step2.classList.remove('active');
                step3.classList.add('active');
                step4.classList.add('active');
                
                // 模拟分析过程（3-5秒）
                setTimeout(function() {
                    loading.style.display = 'none';
                    analysisSection.style.display = 'block';
                    
                    // 生成分析报告（严格区分男女）
                    generateAnalysisReport();
                    
                    // 滚动到分析结果
                    analysisSection.scrollIntoView({ behavior: 'smooth' });
                }, Math.random() * 2000 + 3000);
            });
            
            // 新的分析按钮
            document.getElementById('newAnalysisBtn').addEventListener('click', function() {
                imageInput.value = '';
                uploadedImageData = null;
                previewContainer.style.display = 'none';
                fileInfo.style.display = 'none';
                analysisSection.style.display = 'none';
                step2Content.style.display = 'block';
                
                // 重置步骤指示器
                step3.classList.remove('active');
                step4.classList.remove('active');
                step2.classList.add('active');
            });
            
            // 标签切换
            const tabBtns = document.querySelectorAll('.tab-btn');
            const tabContents = document.querySelectorAll('.tab-content');
            
            tabBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const tabId = this.getAttribute('data-tab');
                    
                    // 移除所有active类
                    tabBtns.forEach(b => b.classList.remove('active'));
                    tabContents.forEach(c => c.classList.remove('active'));
                    
                    // 添加active类到当前标签
                    this.classList.add('active');
                    document.getElementById(tabId).classList.add('active');
                });
            });
            
            // 颜值类型库（完全区分男女）
            const beautyTypes = {
                male: [
                    { name: "硬朗系", description: "面部骨骼感强，线条分明，下颌角明显", color: "#3b82f6" },
                    { name: "儒雅系", description: "五官柔和，气质温文尔雅，面部线条流畅", color: "#8b5cf6" },
                    { name: "阳光系", description: "面部饱满，笑容感染力强，眼角微扬", color: "#f59e0b" },
                    { name: "成熟系", description: "面部特征稳重，气质沉稳，轮廓分明", color: "#64748b" },
                    { name: "少年系", description: "面部特征年轻，充满活力，皮肤质感好", color: "#10b981" },
                    { name: "霸气系", description: "面部宽大，五官立体，气场强大", color: "#1e40af" },
                    { name: "精英系", description: "面部线条清晰，五官端正，气质干练", color: "#374151" }
                ],
                female: [
                    { name: "浓颜系", description: "五官立体，面部对比度强，存在感强", color: "#ec4899" },
                    { name: "淡颜系", description: "五官柔和，面部留白较多，气质清冷", color: "#8b5cf6" },
                    { name: "甜美系", description: "面部圆润，笑容甜美，苹果肌饱满", color: "#f59e0b" },
                    { name: "御姐系", description: "面部线条分明，气质成熟，气场强大", color: "#ef4444" },
                    { name: "气质系", description: "五官协调，气质出众，面部比例完美", color: "#10b981" },
                    { name: "少女系", description: "面部特征年轻，皮肤质感好，充满活力", color: "#f472b6" },
                    { name: "古典系", description: "具有传统东方美学特征，端庄典雅", color: "#7c3aed" }
                ]
            };
            
            // 核心优化重点数据
            const optimizationData = {
                male: [
                    {
                        title: "穿搭优化",
                        icon: "fas fa-tshirt",
                        tips: [
                            "选择V领或开领上衣，拉长面部视觉效果",
                            "修身剪裁西装突出身材优势，增强专业感",
                            "深色系服装（深蓝、灰色、黑色）增强稳重气质",
                            "简约设计衬托面部特征，避免花哨图案",
                            "根据肤色选择服装颜色，提升整体气色",
                            "投资高质量基础款单品，组合多种风格"
                        ]
                    },
                    {
                        title: "发型与胡须",
                        icon: "fas fa-cut",
                        tips: [
                            "尝试有层次感的短发，增加头顶蓬松度",
                            "避免贴头皮发型，适当蓬松感优化面部比例",
                            "深棕色或自然黑色增强面部对比度",
                            "定期修剪发尾，保持发质健康",
                            "根据脸型设计合适的胡须样式",
                            "定期修剪鼻毛和眉毛，保持面部整洁"
                        ]
                    },
                    {
                        title: "皮肤护理",
                        icon: "fas fa-spa",
                        tips: [
                            "每天早晚使用适合肤质的洁面产品",
                            "剃须后使用舒缓产品，减少皮肤刺激",
                            "使用含有抗氧化成分的护肤品",
                            "每周1-2次深层清洁，保持毛孔通畅",
                            "坚持使用防晒产品，防止皮肤老化",
                            "根据季节调整护肤品，保持水油平衡"
                        ]
                    },
                    {
                        title: "配饰搭配",
                        icon: "fas fa-gem",
                        tips: [
                            "方形或矩形镜框增加面部棱角感",
                            "简约设计手表提升造型精致度",
                            "避免夸张配饰，简约项链或手链即可",
                            "根据场合选择配饰，日常以简约为主",
                            "保持配饰清洁，定期擦拭保养",
                            "领带、口袋巾等细节配饰提升精致度"
                        ]
                    },
                    {
                        title: "姿态与礼仪",
                        icon: "fas fa-user-tie",
                        tips: [
                            "学习正确站姿和坐姿，保持挺拔姿态",
                            "练习自信微笑和眼神交流技巧",
                            "了解适合男性的香水使用方法",
                            "学习基础社交礼仪和交谈技巧",
                            "保持良好个人卫生和形象整洁",
                            "根据不同场合调整着装和举止"
                        ]
                    }
                ],
                female: [
                    {
                        title: "穿搭优化",
                        icon: "fas fa-tshirt",
                        tips: [
                            "选择V领或方领上衣，优化面部比例",
                            "高腰设计突出身材优势，拉长腿部线条",
                            "柔和色系服装增强女性柔美气质",
                            "避免复杂花纹，简约设计衬托个人气质",
                            "根据肤色选择莫兰迪色系，提升气色",
                            "投资基础款单品，组合多种风格穿搭"
                        ]
                    },
                    {
                        title: "妆容与发型",
                        icon: "fas fa-paint-brush",
                        tips: [
                            "学习日常淡妆步骤，突出五官优势",
                            "根据脸型设计眉形，眉峰位置要准确",
                            "尝试有层次感的中长发，增加头顶蓬松度",
                            "深棕色或黑茶色增强面部对比度",
                            "学习适合自己眼型的眼影画法",
                            "根据脸型选择合适刘海样式"
                        ]
                    },
                    {
                        title: "皮肤护理",
                        icon: "fas fa-spa",
                        tips: [
                            "建立完整护肤流程：清洁→爽肤→精华→乳液/面霜→防晒",
                            "根据季节和皮肤状态调整护肤品",
                            "每周使用1-2次面膜，补充水分营养",
                            "使用专门的眼部护理产品，预防细纹",
                            "坚持使用防晒，预防光老化和色素沉着",
                            "定期进行皮肤检测，了解皮肤问题"
                        ]
                    },
                    {
                        title: "配饰搭配",
                        icon: "fas fa-gem",
                        tips: [
                            "圆形或椭圆镜框柔和面部线条",
                            "简约设计耳环或项链增加精致度",
                            "手镯或手表选择简约设计，避免复杂",
                            "根据场合选择配饰，日常以简约为主",
                            "保持配饰清洁，定期擦拭保养",
                            "丝巾、发饰等增加造型层次感"
                        ]
                    },
                    {
                        title: "姿态与礼仪",
                        icon: "fas fa-female",
                        tips: [
                            "学习女性优雅站姿和坐姿",
                            "练习自然微笑和眼神交流技巧",
                            "了解女性香水使用礼仪和浓度选择",
                            "学习不同场合的女性着装规范",
                            "保持良好个人卫生和形象管理",
                            "练习优雅举止和社交礼仪"
                        ]
                    }
                ]
            };
            
            // 七天提升计划数据
            const weekPlanData = {
                male: [
                    {
                        day: "第一天",
                        title: "基础评估与清洁",
                        tasks: [
                            "完成肤质测试，确定皮肤类型",
                            "学习正确男士洁面手法",
                            "建立基础护肤流程",
                            "整理现有护肤品"
                        ]
                    },
                    {
                        day: "第二天",
                        title: "发型设计与整理",
                        tasks: [
                            "根据脸型选择适合的发型",
                            "学习基础发型打理技巧",
                            "胡须造型设计",
                            "预约理发店进行咨询"
                        ]
                    },
                    {
                        day: "第三天",
                        title: "穿搭色彩学习",
                        tasks: [
                            "学习男士基础色彩搭配",
                            "根据肤色确定适合的色彩",
                            "学习服装版型选择",
                            "整理衣柜，建立搭配体系"
                        ]
                    },
                    {
                        day: "第四天",
                        title: "细节修饰训练",
                        tasks: [
                            "学习男士基础修饰技巧",
                            "配饰选择与搭配原则",
                            "学习不同领型搭配",
                            "香水使用礼仪学习"
                        ]
                    },
                    {
                        day: "第五天",
                        title: "实践穿搭记录",
                        tasks: [
                            "尝试3套不同风格穿搭",
                            "学习基础拍照技巧",
                            "建立穿搭相册",
                            "邀请朋友进行评分"
                        ]
                    },
                    {
                        day: "第六天",
                        title: "社交礼仪训练",
                        tasks: [
                            "学习基础社交礼仪",
                            "姿态训练：站姿、坐姿、走姿",
                            "表情管理练习",
                            "声音训练与控制"
                        ]
                    },
                    {
                        day: "第七天",
                        title: "总结与规划",
                        tasks: [
                            "回顾一周学习成果",
                            "制定长期形象维护计划",
                            "建立日常形象管理清单",
                            "设定形象提升目标"
                        ]
                    }
                ],
                female: [
                    {
                        day: "第一天",
                        title: "肤质分析与护肤",
                        tasks: [
                            "完成详细肤质测试",
                            "学习正确护肤步骤",
                            "建立早晚护肤流程",
                            "整理化妆台"
                        ]
                    },
                    {
                        day: "第二天",
                        title: "基础妆容学习",
                        tasks: [
                            "学习女性日常妆容步骤",
                            "底妆技巧学习",
                            "眉形设计与修眉",
                            "眼妆基础学习"
                        ]
                    },
                    {
                        day: "第三天",
                        title: "发型与色彩搭配",
                        tasks: [
                            "根据脸型选择发型",
                            "学习基础发型打理",
                            "色彩搭配学习",
                            "服装版型选择"
                        ]
                    },
                    {
                        day: "第四天",
                        title: "配饰搭配提升",
                        tasks: [
                            "学习配饰搭配原则",
                            "包包选择技巧",
                            "香水使用学习",
                            "建立个人配饰档案"
                        ]
                    },
                    {
                        day: "第五天",
                        title: "实践造型记录",
                        tasks: [
                            "尝试3种不同风格造型",
                            "学习自拍和他拍技巧",
                            "建立个人造型相册",
                            "邀请朋友进行评分"
                        ]
                    },
                    {
                        day: "第六天",
                        title: "优雅仪态训练",
                        tasks: [
                            "学习女性优雅仪态",
                            "表情管理训练",
                            "社交礼仪学习",
                            "声音训练与控制"
                        ]
                    },
                    {
                        day: "第七天",
                        title: "总结与体系建立",
                        tasks: [
                            "回顾一周学习成果",
                            "制定长期形象管理计划",
                            "建立个人形象管理系统",
                            "设定阶段性目标"
                        ]
                    }
                ]
            };
            
            // 生成分析报告
            function generateAnalysisReport() {
                // 更新个人信息显示
                const genderText = userGender === 'male' ? '男性' : '女性';
                document.getElementById('resultGender').textContent = genderText;
                document.getElementById('resultAge').textContent = userAge;
                document.getElementById('resultHeight').textContent = userHeight;
                document.getElementById('resultWeight').textContent = userWeight;
                
                // 计算BMI
                const heightM = userHeight / 100;
                const bmi = userWeight / (heightM * heightM);
                
                // 随机选择颜值类型（基于性别）
                const genderTypes = beautyTypes[userGender];
                const randomTypeIndex = Math.floor(Math.random() * genderTypes.length);
                const selectedType = genderTypes[randomTypeIndex];
                document.getElementById('beautyType').textContent = selectedType.name;
                document.getElementById('beautyType').style.background = `linear-gradient(135deg, ${selectedType.color}, ${adjustColor(selectedType.color, 30)})`;
                
                // 生成综合分数
                const baseScore = 70 + Math.random() * 25; // 70-95之间的基础分
                
                // 根据BMI调整分数
                let bmiAdjustment = 0;
                const idealBMIMale = bmi >= 18.5 && bmi <= 24;
                const idealBMIFemale = bmi >= 18 && bmi <= 23;
                const idealBMI = userGender === 'male' ? idealBMIMale : idealBMIFemale;
                
                if (idealBMI) {
                    bmiAdjustment = 6; // 理想BMI加分
                } else if ((userGender === 'male' && bmi >= 17 && bmi < 18.5) || 
                          (userGender === 'female' && bmi >= 17 && bmi < 18) ||
                          (userGender === 'male' && bmi > 24 && bmi <= 26) ||
                          (userGender === 'female' && bmi > 23 && bmi <= 25)) {
                    bmiAdjustment = 0; // 偏瘦或偏胖不减分
                } else {
                    bmiAdjustment = -6; // 过瘦或过胖减分
                }
                
                // 根据年龄调整分数（男女标准不同）
                let ageAdjustment = 0;
                if (userGender === 'male') {
                    if (userAge >= 18 && userAge <= 30) {
                        ageAdjustment = 4; // 男性青年期加分
                    } else if (userAge > 30 && userAge <= 45) {
                        ageAdjustment = 2; // 男性中年期轻微加分
                    } else if (userAge > 45 && userAge <= 60) {
                        ageAdjustment = 0; // 男性中老年期不减分
                    } else {
                        ageAdjustment = -4; // 其他年龄减分
                    }
                } else {
                    if (userAge >= 18 && userAge <= 28) {
                        ageAdjustment = 4; // 女性青年期加分
                    } else if (userAge > 28 && userAge <= 40) {
                        ageAdjustment = 2; // 女性中年期轻微加分
                    } else if (userAge > 40 && userAge <= 55) {
                        ageAdjustment = 0; // 女性中老年期不减分
                    } else {
                        ageAdjustment = -4; // 其他年龄减分
                    }
                }
                
                // 计算最终得分
                const finalScore = Math.max(55, Math.min(98, Math.round(baseScore + bmiAdjustment + ageAdjustment)));
                document.getElementById('overallScore').textContent = finalScore;
                
                // 生成核心优化重点
                generateOptimizationFocus();
                
                // 生成七天提升计划
                generateWeekPlan();
                
                // 更新五官分析
                updateFacialAnalysis();
            }
            
            // 更新五官分析
            function updateFacialAnalysis() {
                // 生成随机分数
                const eyeScore = Math.floor(Math.random() * 25) + 70;
                const noseScore = Math.floor(Math.random() * 25) + 70;
                const lipScore = Math.floor(Math.random() * 25) + 70;
                const contourScore = Math.floor(Math.random() * 30) + 65;
                const skullScore = Math.floor(Math.random() * 30) + 65;
                const symmetryScore = Math.floor(Math.random() * 30) + 65;
                const skinScore = Math.floor(Math.random() * 30) + 65;
                const tissueScore = Math.floor(Math.random() * 30) + 65;
                const youthScore = Math.floor(Math.random() * 30) + 65;
                
                // 更新眼部分析
                document.getElementById('eyeScore').textContent = `${eyeScore}%`;
                document.getElementById('eyeFill').style.width = `${eyeScore}%`;
                
                // 更新鼻部分析
                document.getElementById('noseScore').textContent = `${noseScore}%`;
                document.getElementById('noseFill').style.width = `${noseScore}%`;
                
                // 更新唇部分析
                document.getElementById('lipScore').textContent = `${lipScore}%`;
                document.getElementById('lipFill').style.width = `${lipScore}%`;
                
                // 更新其他分析分数
                document.getElementById('contourScore').textContent = `${contourScore}%`;
                document.getElementById('contourFill').style.width = `${contourScore}%`;
                
                document.getElementById('skullScore').textContent = `${skullScore}%`;
                document.getElementById('skullFill').style.width = `${skullScore}%`;
                
                document.getElementById('symmetryScore').textContent = `${symmetryScore}%`;
                document.getElementById('symmetryFill').style.width = `${symmetryScore}%`;
                
                document.getElementById('skinScore').textContent = `${skinScore}%`;
                document.getElementById('skinFill').style.width = `${skinScore}%`;
                
                document.getElementById('tissueScore').textContent = `${tissueScore}%`;
                document.getElementById('tissueFill').style.width = `${tissueScore}%`;
                
                document.getElementById('youthScore').textContent = `${youthScore}%`;
                document.getElementById('youthFill').style.width = `${youthScore}%`;
            }
            
            // 生成核心优化重点
            function generateOptimizationFocus() {
                const optimizationGrid = document.getElementById('optimizationGrid');
                optimizationGrid.innerHTML = '';
                
                const optimizations = optimizationData[userGender];
                
                optimizations.forEach(optimization => {
                    const optimizationCard = document.createElement('div');
                    optimizationCard.className = 'optimization-card';
                    
                    // 随机选择3-4个提示
                    const selectedTips = [];
                    const tipCount = Math.floor(Math.random() * 2) + 3; // 3-4个提示
                    const shuffledTips = [...optimization.tips].sort(() => 0.5 - Math.random());
                    
                    for (let i = 0; i < tipCount && i < shuffledTips.length; i++) {
                        selectedTips.push(shuffledTips[i]);
                    }
                    
                    optimizationCard.innerHTML = `
                        <div class="optimization-card-title">
                            <i class="${optimization.icon}"></i>
                            ${optimization.title}
                        </div>
                        <div class="optimization-content">
                            <ul class="optimization-list">
                                ${selectedTips.map(tip => `<li><i class="fas fa-check-circle"></i> ${tip}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                    
                    optimizationGrid.appendChild(optimizationCard);
                });
            }
            
            // 生成七天提升计划
            function generateWeekPlan() {
                const weekPlan = document.getElementById('weekPlan');
                weekPlan.innerHTML = '';
                
                const plans = weekPlanData[userGender];
                const colors = ['#3b82f6', '#10b981', '#f59e0b', '#8b5cf6', '#ec4899', '#06b6d4', '#ef4444'];
                
                plans.forEach((plan, index) => {
                    const dayCard = document.createElement('div');
                    dayCard.className = 'day-card';
                    dayCard.style.borderLeft = `8px solid ${colors[index]}`;
                    
                    dayCard.innerHTML = `
                        <div class="day-header">
                            <div class="day-title">${plan.title}</div>
                            <div class="day-number">${plan.day.substring(0, 2)}</div>
                        </div>
                        <div class="day-content">
                            <ul>
                                ${plan.tasks.map(task => `<li><i class="fas fa-check-circle" style="color: ${colors[index]}"></i> ${task}</li>`).join('')}
                            </ul>
                        </div>
                    `;
                    
                    weekPlan.appendChild(dayCard);
                });
            }
            
            // 辅助函数：调整颜色亮度
            function adjustColor(color, amount) {
                let usePound = false;
                
                if (color[0] === "#") {
                    color = color.slice(1);
                    usePound = true;
                }
                
                const num = parseInt(color, 16);
                let r = (num >> 16) + amount;
                
                if (r > 255) r = 255;
                else if (r < 0) r = 0;
                
                let b = ((num >> 8) & 0x00FF) + amount;
                
                if (b > 255) b = 255;
                else if (b < 0) b = 0;
                
                let g = (num & 0x0000FF) + amount;
                
                if (g > 255) g = 255;
                else if (g < 0) g = 0;
                
                return (usePound ? "#" : "") + (g | (b << 8) | (r << 16)).toString(16).padStart(6, '0');
            }
            
            // PDF导出功能
            const exportBtn = document.getElementById('exportBtn');
            const exportLoading = document.getElementById('exportLoading');
            const mainContainer = document.getElementById('mainContainer');
            
            exportBtn.addEventListener('click', async function() {
                if (!analysisSection.style.display || analysisSection.style.display === 'none') {
                    alert('请先完成面部分析，生成报告后再导出');
                    return;
                }
                
                // 禁用导出按钮，显示加载状态
                exportBtn.disabled = true;
                exportBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> 正在生成PDF...';
                exportLoading.style.display = 'block';
                
                try {
                    // 使用html2canvas将整个容器转换为图片
                    const canvas = await html2canvas(mainContainer, {
                        scale: 1.5,
                        useCORS: true,
                        backgroundColor: '#ffffff',
                        logging: false,
                        allowTaint: true,
                        onclone: function(clonedDoc) {
                            // 确保所有图片在克隆文档中正确加载
                            const images = clonedDoc.querySelectorAll('img');
                            images.forEach(img => {
                                if (img.src && img.src.startsWith('data:')) {
                                    img.crossOrigin = 'anonymous';
                                }
                            });
                        }
                    });
                    
                    // 创建PDF文档
                    const { jsPDF } = window.jspdf;
                    const pdf = new jsPDF({
                        orientation: 'portrait',
                        unit: 'mm',
                        format: 'a4'
                    });
                    
                    const pdfWidth = pdf.internal.pageSize.getWidth();
                    const pdfHeight = pdf.internal.pageSize.getHeight();
                    
                    // 计算图片在PDF中的尺寸
                    const imgWidth = canvas.width;
                    const imgHeight = canvas.height;
                    const ratio = Math.min(pdfWidth / imgWidth, pdfHeight / imgHeight) * 0.95;
                    const canvasWidth = imgWidth * ratio;
                    const canvasHeight = imgHeight * ratio;
                    
                    // 将canvas图片添加到PDF
                    const imgData = canvas.toDataURL('image/jpeg', 0.92);
                    pdf.addImage(imgData, 'JPEG', 
                        (pdfWidth - canvasWidth) / 2,
                        10,
                        canvasWidth, 
                        canvasHeight
                    );
                    
                    // 添加页脚信息
                    const date = new Date().toLocaleDateString('zh-CN');
                    const time = new Date().toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' });
                    pdf.setFontSize(10);
                    pdf.setTextColor(100, 100, 100);
                    pdf.text(`生成时间: ${date} ${time}`, pdfWidth / 2, pdfHeight - 12, { align: 'center' });
                    pdf.text(`FacePro Ultimate ${userGender === 'male' ? '男性' : '女性'}专属分析报告 | © 2026`, pdfWidth / 2, pdfHeight - 6, { align: 'center' });
                    
                    // 保存PDF文件
                    const genderText = userGender === 'male' ? '男性' : '女性';
                    const fileName = `FaceProUltimate_${genderText}_分析报告_${new Date().getTime()}.pdf`;
                    pdf.save(fileName);
                    
                    // 显示成功提示
                    setTimeout(function() {
                        alert(`PDF报告已生成并开始下载！这是${genderText}专属分析报告，包含所有分析结果和提升计划。`);
                    }, 600);
                    
                } catch (error) {
                    console.error('PDF导出错误:', error);
                    alert('生成PDF时出现错误，请重试或检查网络连接');
                } finally {
                    // 恢复按钮状态
                    exportBtn.disabled = false;
                    exportBtn.innerHTML = '<i class="fas fa-file-pdf"></i> 导出完整分析报告为PDF';
                    exportLoading.style.display = 'none';
                }
            });
            
            console.log('FacePro Ultimate 精简版面部分析系统已加载 - 版本 2026');
            console.log('系统已严格区分男女性别，提供核心优化重点和七天提升计划');
        });
    </script>
</body>
</html>